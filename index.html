<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arblizz RGB Gradient Generator</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: #ddd;
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 280px;
      background: #2a2a2a;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      background: linear-gradient(90deg, #ff0000, #00ff00, #0000ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    textarea {
      width: 100%;
      padding: 8px;
      border: none;
      border-radius: 6px;
      margin-bottom: 12px;
      font-size: 1rem;
      resize: none;
    }
    input[type="color"] {
      margin: 4px;
      width: 40px;
      height: 40px;
      border: none;
      cursor: pointer;
    }
    button {
      background: #444;
      border: none;
      color: #fff;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 6px;
    }
    button:hover {
      background: #666;
    }
    .preview {
      margin-bottom: 20px;
      font-size: 1.5rem;
      word-break: break-word;
    }
    .output {
      background: #2a2a2a;
      margin-bottom: 15px;
      padding: 12px;
      border-radius: 8px;
    }
    .output h3 {
      margin: 0 0 6px 0;
      font-size: 1rem;
      color: #aaa;
    }
    .output code {
      display: block;
      white-space: pre-wrap;
      word-wrap: break-word;
      background: #1e1e1e;
      padding: 8px;
      border-radius: 6px;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h1>Arblizz<br>RGB Tool</h1>
    <textarea id="textInput" rows="3">Hello Arblizz!</textarea>
    <div id="colorPickers">
      <input type="color" value="#ff0000">
      <input type="color" value="#0000ff">
    </div>
    <button onclick="addColor()">+ Add Color</button>
  </div>

  <div class="main">
    <div class="preview" id="preview"></div>

    <div class="output">
      <h3>MiniMessage</h3>
      <code id="mini"></code>
      <button onclick="copyText('mini')">Copy</button>
    </div>

    <div class="output">
      <h3>Legacy (§x)</h3>
      <code id="legacy"></code>
      <button onclick="copyText('legacy')">Copy</button>
    </div>

    <div class="output">
      <h3>&x Format</h3>
      <code id="andx"></code>
      <button onclick="copyText('andx')">Copy</button>
    </div>

    <div class="output">
      <h3>&lt;#hex&gt; Format</h3>
      <code id="hexformat"></code>
      <button onclick="copyText('hexformat')">Copy</button>
    </div>

    <div class="output">
      <h3>JSON</h3>
      <code id="json"></code>
      <button onclick="copyText('json')">Copy</button>
    </div>

    <div class="output">
      <h3>[COLOR] Tags</h3>
      <code id="colorTag"></code>
      <button onclick="copyText('colorTag')">Copy</button>
    </div>
  </div>

  <script>
    function hexToRgb(hex) {
      let bigint = parseInt(hex.slice(1), 16);
      return [(bigint >> 16) & 255, (bigint >> 8) & 255, bigint & 255];
    }
    function lerp(a, b, t) { return a + (b - a) * t; }
    function gradientHexes(text, colors) {
      const chars = text.split('');
      const segCount = colors.length - 1;
      let output = [];
      for (let i = 0; i < chars.length; i++) {
        let pos = i / (chars.length - 1 || 1);
        let seg = Math.min(Math.floor(pos * segCount), segCount - 1);
        let t = (pos - seg / segCount) * segCount;
        let [r1, g1, b1] = hexToRgb(colors[seg]);
        let [r2, g2, b2] = hexToRgb(colors[seg + 1]);
        let r = Math.round(lerp(r1, r2, t));
        let g = Math.round(lerp(g1, g2, t));
        let b = Math.round(lerp(b1, b2, t));
        output.push("#" + [r,g,b].map(x => x.toString(16).padStart(2,"0")).join(""));
      }
      return output;
    }
    function formatLegacy(hexes, text) {
      return hexes.map((h, i) =>
        "§x" + h.slice(1).split("").map(c => "§" + c).join("") + text[i]
      ).join("");
    }
    function formatAndX(hexes, text) {
      return hexes.map((h, i) =>
        "&x" + h.slice(1).split("").map(c => "&" + c).join("") + text[i]
      ).join("");
    }
    function formatHex(hexes, text) {
      return hexes.map((h,i)=> `<${h}>${text[i]}`).join("");
    }
    function formatJSON(hexes, text) {
      return "[" + hexes.map((h, i) =>
        `{"text":"${text[i]}","color":"${h}"}`
      ).join(",") + "]";
    }
    function formatColorTags(hexes, text) {
      return hexes.map((h,i)=> `[COLOR=${h}]${text[i]}[/COLOR]`).join("");
    }
    function update() {
      const text = document.getElementById("textInput").value;
      const colorInputs = document.querySelectorAll("#colorPickers input[type=color]");
      const colors = Array.from(colorInputs).map(c => c.value);
      const hexes = gradientHexes(text, colors);

      document.getElementById("preview").innerHTML =
        text.split("").map((ch,i)=> `<span style="color:${hexes[i]}">${ch}</span>`).join("");

      document.getElementById("mini").textContent =
        `<gradient:${colors.join(":")}>${text}</gradient>`;
      document.getElementById("legacy").textContent = formatLegacy(hexes, text);
      document.getElementById("andx").textContent = formatAndX(hexes, text);
      document.getElementById("hexformat").textContent = formatHex(hexes, text);
      document.getElementById("json").textContent = formatJSON(hexes, text);
      document.getElementById("colorTag").textContent = formatColorTags(hexes, text);
    }
    function copyText(id) {
      navigator.clipboard.writeText(document.getElementById(id).textContent);
      alert("Copied!");
    }
    function addColor() {
      const inp = document.createElement("input");
      inp.type = "color";
      inp.value = "#ffffff";
      inp.oninput = update;
      document.getElementById("colorPickers").appendChild(inp);
      update();
    }
    document.querySelectorAll("textarea, input[type=color]").forEach(el=>{
      el.addEventListener("input", update);
    });
    update();
  </script>
</body>
</html>